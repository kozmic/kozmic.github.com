<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>AngularJS</title>

		<meta name="author" content="Ståle Pettersen">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">
		<link rel="stylesheet" href="css/overlay.css">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

				<section>
					<img src="img/AngularJS-large.png" alt="AngularJS" class="big" width="50%"/>
					<h3>Superheroic JavaScript MVW Framework</h3>
					<p>
						<small>Slides and demo by Ståle Pettersen / <a href="http://twitter.com/kozmic">@kozmic</a> </small>
					</p>
				</section>

                <section>
                    <h2>TL;DR</h2>

                    <ul>
                        <li>
                            Developed by Google
                        </li>
                        <li>
                            MVW
                        </li>
                        <li>
                            Extend HTML with your own components
                        </li>
                        <li>
                            Two way data-binding
                        </li>
                        <li>
                            Dependency injection / Testable
                        </li>
                        <li>
                            Routing and deep linking
                        </li>
                        <li>
                            Validation
                        </li>
                        <li>
                            Security mechanisms
                        </li>
                        <li>
                            Supported by all browsers (and IE7)
                        </li>
                        <li>
                            XHR with exception handling, promises and interceptors
                        </li>
                    </ul>

                    <aside class="notes">
                        <ul>
                            <li>
                                Et global objekt, "angular", resten er DI.
                            </li>
                        </ul>
                    </aside>
                </section>

                <section>
                    <h2>TL;DR TL;DR</h2>

                    <p>
                        AngularJS is a HTML compiler running in the browser
                    </p>

                    <aside class="notes"></aside>
                </section>

                <section>
                    <h2>MVVM-ish</h2>
                    <table>
                        <tr>
                            <td><strong>Model:</strong></td>
                            <td>Plain Javascript</td>
                        </tr>
                        <tr>
                            <td><strong>ViewModel:</strong></td>
                            <td>$scope object with tiny API which is dirty checked</td>
                        </tr>
                        <tr>
                            <td><strong>Controller:</strong></td>
                            <td>Set initial state of $scope and defines behavior when $scope change</td>
                        </tr>
                        <tr>
                            <td><strong>View:</strong></td>
                            <td>Resulting HTML rendered markup (including directives) with bindings</td>
                        </tr>
                    </table>
                    
                    <aside class="notes"></aside>
                </section>


				<section>
					<h2>Simple AngularJS app</h2>
					<pre><code contenteditable>
&lt;html ng-app&gt;
&lt;head&gt;
    &lt;script type="text/javascript" src="lib/angular/angular.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;input type="text" ng-model="name"&gt;
    &lt;h3&gt;Hello {{name}}!&lt;/h3&gt;
&lt;/body&gt;
&lt;/html&gt;
					</code></pre>
				</section>


                <section>
                    <h2>Controller</h2>

                    <ul>
                        <li>
                            Populates $scope through service or factory
                        </li>
                        <li>
                            Provides $scope to view
                        </li>
                    </ul>

                    <aside class="notes"></aside>
                </section>

                <section>
                    <h2>Controller</h2>

                    <pre><code>
var SimpleCtrl = function ($scope) {

    $scope.title = "SimpleCtrl fantastic title";
    $scope.footer = "My Footer ";

    $scope.people = [
        {name: 'Jøran Lillesand', age: 28, tronder: true},
        {name: 'Ståle Pettersen', age: 20, tronder: false},
        {name: 'Ola Nordmann', age: 50, tronder: false }
    ];

    $scope.addPerson = function() {
        $scope.people.push({name: $scope.name, age: $scope.age});
        $scope.name = "";
        $scope.age = "";
    };

    $scope.deletePerson = function (person) {
        $scope.people.splice($scope.people.indexOf(person), 1);
    };

}
                    </code></pre>

                    <aside class="notes"></aside>
                </section>

                <section>
                    <h2>Data-binding</h2>

                    <ul>
                        <li>
                            Uses dirty checking instead of change listeners
                        </li>
                        <li>
                            ($apply -&gt;) $digest -&gt; $watch
                        </li>
                        <li>
                            To trigger changes in AngularJS from outside AngularJS:
                            <pre><code>$scope.$apply(SCOPE-CHANGING-CODE-HERE)</code></pre>
                        </li>
                    </ul>

                    <footer>
                        <ul>
                            <li>Lifecycle details: http://onehungrymind.com/notes-on-angularjs-scope-life-cycle/</li>
                        </ul>

                    </footer>

                    <aside class="notes">
                        <ul>
                            <li>
                                $digest processes all watch expressions in current scope
                            </li>
                            <li>
                                http://stackoverflow.com/questions/9682092/databinding-in-angularjs/9693933#9693933
                            </li>
                            <li>
                                $apply is $digest with error handling++ (and always dirty checks the whole $rootScope
                            </li>
                            <li>
                                Digest har en 10 cycle limit, får du denne feilen har du en sirkulær avhengighet.
                            </li>
                            <li>
                                $scope.$apply er nice for console ting med AngularJS debug console
                            </li>
                        </ul>
                    </aside>
                </section>

                <section>
                    <h2>Templates</h2>

                    <ul>
                        <li>
                            Inline / URL / script-type
                        </li>
                        <li>
                            Parsed by browser and resulting DOM is cached in $templateCache
                        </li>
                    </ul>
                    <pre><code>
&lt;h2>{{ heading }}&lt;/h2>
&lt;h2 ng-model="heading">&lt;/h2>
&lt;h2 ng-bind="heading">&lt;/h2>

                    </code></pre>

                    <aside class="notes">
                    </aside>
                </section>

                <section>
                    <h2>
                        Template lifecycle
                    </h2>
                    <img src="img/concepts-view.png" width="55%"/>

                    <p>
                        Source: <a href="http://docs.angularjs.org/guide/concepts">http://docs.angularjs.org/guide/concepts</a>
                    </p>

                    <aside class="notes">
                        AngularJS: Browser renderer template, DOM deretter. Andre: Reparser String-template med data ved update
                    </aside>
                </section>

                <section>
                    <h2>Dependency injection</h2>

                    <p>
                        Magic DI
                    </p>
                    <pre><code>
var FancyCtrl = function($scope, $location, FancyService) {
    // Your batshit fancy code here
}
                    </code></pre>
                    <p>
                        Minifiable
                    </p>
                    <pre><code>
FancyCtrl.$inject = ['$scope', '$location', 'FancyService'];
                    </code></pre>

                    <aside class="notes">
                        Alternativt alt på en gang:
                        var FancyCtrl = ['$scope', '$location', 'FancyService', function($scope, $http) { /**/ }];
                    </aside>
                </section>

                <section>
                    <h2>Dependency injection</h2>

                    <pre><code>
angualar.module('myModule', []).
config(function(depService){
...
}).
factory('serviceId', function(depService) {
...
}).
directive('directiveName', function(depService) {
...
}).
filter('filterName', function(depService) {
...
}).
run(function(depService) {
...
});
                    </code></pre>

                    <aside class="notes"></aside>
                </section>

                <section>
                    <h2>Dependency injection IRL example</h2>

                    <pre><code>
var RealLifeApp = angular.module('RealLifeApp', [
    'ngSanitize',
    'routes',
    'services',
    'jobs',
    'loader',
    'filters',
    'ajaxErrorHandler',
    'ajaxHeaderSetup',
    'timeoutInterceptor',
    'specialDirectives',
    'cmsTextDirectives'
]);
                    </code></pre>

                    <aside class="notes"></aside>
                </section>

                <section>
                    <h2>REST</h2>

                    <ul>
                        <li>
                            Buildt in service $resource:
                            <pre><code>$resource(url[, paramDefaults][, actions]);</code></pre>
                        </li>
                        <li>
                            Default returns: query, save, remove
                        </li>
                        <li>
                            Buildt on top of $http (ajax, promise, interceptors, exception handling, >)]}',</strong>, X-XSRF-TOKEN header)
                        </li>
                    </ul>
                    <pre><code>
var CreditCard = $resource('/user/:userId/card/:cardId',
    {userId:123, cardId:'@id'}, {
    charge: {method:'POST', params:{charge:true}}
});
var newCard = new CreditCard({number:'0123'});
newCard.name = "Mike Smith";
newCard.$save();
                    </code></pre>

                    <aside class="notes"></aside>
                </section>

                <section>
                    <h2>REST mocking</h2>

                    <pre><code>
// Mocking XHR in dev-mode
var MyAppDev = angular.module('MyAppDev', ['MyApp', 'ngMockE2E']);
    MyAppDev.run(function($httpBackend) {

    $httpBackend.whenGET('/simple/ping').respond('pong');
    $httpBackend.whenGET('/simple/cards/').respond(window.data.cards);
}
                    </code></pre>
                    <pre><code>
&lt;html ng-app="MyAppDev">
                    </code></pre>

                    <aside class="notes"></aside>
                </section>

                <section>
                    <h2>Directives</h2>

                    <ul>
                        <li>
                            At the core of AngularJS
                        </li>
                        <li>
                            We've already seen some of the built in directives
                        </li>
                        <li>
                            Can be really simple or complex, and crazy powerful
                        </li>
                    </ul>

                    <pre><code>
&lt;html ng-app&gt;
&lt;button ng-click="save()">&lt;/button>
&lt;question type="radio" title="Felling good?" alts="{ 'yes':1, 'no':0 }" />
&lt;markdown>
## Crazy stuff
* Should give AngularJS a spin
* 4 realz!
&lt;/markdown>

                    </code></pre>

                    <aside class="notes">
                    </aside>
                </section>

                <section>
                    <h2>Directive - API</h2>
                    <pre><code>
myApp.directive('directiveName', function() {
  return {
    priority: 0,
    scope: { localName:'@myAttr' },
    template: '&lt;div>&lt;/div>',
    templateUrl: 'directive.html',
    replace: true,
    restrict: 'EACM',
    controller: function
    compile: function compile(tElement, tAttrs, transclude) {
      return {
        pre: function preLink(scope, iElement, iAttrs, controller) {..},
        post: function postLink(scope, iElement, iAttrs, controller) {..}
      }
    },
    link: function postLink(scope, iElement, iAttrs) {..}
  }
});
                    </code></pre>
                    <p>Usage:</p>
                    <pre><code>
&lt;directive-name/> &lt;div class="directive-name"/>
&lt;div directive-name/>&lt;!-- directive: directive-name -->
                    </code></pre>
                </section>

                <section>
                    <h2>Directives</h2>

                    <p>
                        Usually small and easy to understand
                    </p>
                    <ul>
                        <li>
                            link
                        </li>
                        <li>
                            replace and templateUrl
                        </li>
                    </ul>

                    <aside class="notes"></aside>
                </section>

                <section>
                    <h2>Directives - Simple</h2>

                    <pre><code>
myApp.directive('picture', function () {
  return {
    restrict: 'E',
    replace: false,
    link: function (scope, element, attrs) {
      if (scope.$root.isOldIE) {
        scope.imageSrc = "img/" + scope.image.src;

      } else {
        scope.imageSrc = "data:" + scope.image.mimeType + ";base64," + scope.image.data;
      }
    },
    template: '&lt;img src="{{imageSrc}}"/>',
    replace: true
  }
})
                    </code></pre>

                </section>

                <section>
                    <h2>Directives - Advanced</h2>

                </section>

                <section>
                    <h2>Routes</h2>

                    <pre><code>
angular.module('myRoutes', [], function($routeProvider, $locationProvider) {
  $routeProvider
    .when('/user/:userId', {
      templateUrl: 'user.html',
      controller: UserCtrl
    })

    .when('/user/:userId/card/:cardId', {
      templateUrl: 'card.html',
      controller: CardCtrl,
      resolve: {
        delay: function($q, $timeout) {
          var delay = $q.defer();
          $timeout(delay.resolve, 200);
          return delay.promise;
        }
      }
    })

    .when('/404', { templateUrl: '404.html' });

    .otherwise( { redirectTo: '/404' });

  $locationProvider.html5Mode(true);
});
                    </code></pre>

                    <aside class="notes">
                        merk at templates er partials og renderes i ng-view
                    </aside>
                </section>

                <section>
                    <h2>Validation</h2>

                    <p>
                        Built-in
                    </p>
                    <ul>
                        <li>HTML5 Input types: text, number, url, email, radio, checkbox</li>
                        <li>Directives: required, pattern, minlength, maxlength, min, max</li>
                        <li>Build your own validation directives</li>
                        <li>novalidate to disable browser performing validation</li>
                    </ul>

                    <aside class="notes"></aside>
                </section>

                <section>
                    <h2>Validation - Example</h2>

                    <pre><code>
&lt;form name="form" class="css-form" novalidate>
  Name:
  &lt;input type="text" ng-model="user.name" name="uName" required />
  E-mail:
  &lt;input type="email" ng-model="user.email" name="uEmail" required/>

  &lt;div ng-show="form.uEmail.$dirty && form.uEmail.$invalid">
    Invalid:
    &lt;span ng-show="form.uEmail.$error.required">Email required&lt;/span>
    &lt;span ng-show="form.uEmail.$error.email">Invalid email&lt;/span>
  &lt;/div>

  Gender:
  &lt;input type="radio" ng-model="user.gender" value="male" />male
  &lt;input type="radio" ng-model="user.gender" value="female" />female

&lt;button ng-click="update(user)"
        ng-disabled="form.$invalid || isUnchanged(user)">SAVE&lt;/button>
&lt;/form>
                    </code></pre>

                    <aside class="notes"></aside>
                </section>

                <section>
                    <h2>Testing</h2>
                    <pre><code>
angular.module('myApplicationModule', [])
.value('mode', 'app')
.value('version', 'v1.0.1');

describe('MyApp', function() {

// You need to load modules that you want to test,
// it loads only the "ng" module by default.
beforeEach(module('myApplicationModule'));

// inject() is used to inject arguments of all given functions
it('should provide a version', inject(function(mode, version) {
expect(version).toEqual('v1.0.1');
expect(mode).toEqual('app');
}));
</code></pre>
                    <p>angular.mock.inject with jasmine</p>
                    <aside class="notes"></aside>
                </section>

                <section>
                    <h2>Tools</h2>

                    <ul>
                        <li>
                            Chrome Extension: AngularJS Batarang
                        </li>
                        <li>
                            angular.mock.debug
                        </li>
                    </ul>

                    <aside class="notes"></aside>
                </section>

                <section>
                    <h2>Good resources</h2>
                    <ul>
                        <li><a href="http://angularjs.org/">angularjs.org</a></li>
                        <li><a href="http://blog.angularjs.org/">blog.angularjs.org/</a></li>
                        <li><a href="http://www.youtube.com/user/johnlindquist">John Lindquist @ youtube.com</a></li>
                        <li><a href="http://docs.angularjs.org/cookbook/">AngularJS cookbook examples</a></li>
                        <li><a href="https://github.com/angular/angular-seed">angular-seed</a></li>
                        <li><a href="https://github.com/mmrath/angular-seed">angular-seed with RequireJS</a></li>
                        <li><a href="http://angular-ui.github.com/">Angular-UI</a></li>
                        <li><a href="http://groups.google.com/group/angular ">Google groups - AngularJS</a></li>
                        <li><a href="http://deansofer.com/posts/view/14/AngularJs-Tips-and-Tricks-UPDATED">AngularJS tips and tricks</a></li>

                    </ul>
                </section>


				<section>
					<h1>THE END</h1>
					<h3>BY Ståle Pettersen / <a href="https://twitter.com/kozmic">@kozmic</a></h3>

                    <p>
                        Demo app: <a href="http://kozmic.github.com/angular-demo/">http://kozmic.github.com/angular-demo/</a>
                    </p>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					/*{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },*/
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
